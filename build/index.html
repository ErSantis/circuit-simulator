<!DOCTYPE html>

<html>

<head>
	<script src="../jquery-2.1.1.min.js"></script>
	<link rel="stylesheet" href="../styles/styles.css">
	<script src="circuit.js"></script>
	<script src="schematicCapture.js"></script>
</head>

<body>
	<div id="topBar">
		<b>Circuit</b> | Cap
	</div>
	<div class="components">
		<table style='width:100%'>
			<tr>
				<td>
					<img class="componentButton" id="ground" src="icons/ground.png" width="50px">
					<img class="componentButton" id="vSource" src="icons/voltage.png" width="50px">
					<img class="componentButton" id="resistor" src="icons/resistor.png" width="50px">
					<img class="componentButton" id="capacitor" src="icons/capacitor.png" width="50px">
					<img class="componentButton" id="diode" src="icons/diode.png" width="50px">

				</td>
				<td style='text-align:right'><span id='clear' class="button">Clear Components</span></Td>
			</tr>
		</table>
	</div>

	<canvas style='position:absolute' id="schematic"></canvas>
	<canvas style='position:absolute' id="graph"></canvas>


	<div style='position:absolute' id="dialog" class="editor">
		Edit: <input id="editValue" />
	</div>

	<div id="rep" style='position:absolute;height:400px;width:600px;overflow-y:auto;'>

		test
	</div>


	<script>
	

		function resizeWindow() {
			$("#schematic")[0].width = window.innerWidth - 600;
			$("#schematic")[0].height = window.innerHeight;
			$("#graph")[0].width = 590;
			$("#graph")[0].height = 500;
			var heightOffset = $("#components").innerHeight();
			$("#schematic").css({ top: heightOffset, width: window.innerWidth - 605, height: window.innerHeight });
			$("#graph").css({ top: heightOffset, width: 590, height: 500, left: window.innerWidth - 600 });
			var kaka = 100;
			$("#rep").css({ top: heightOffset + 600, left: window.innerWidth - 605 });
			//$("#rep").css({top:400});
			//console.log("height "+window.innerWidth+ " height off "+heightOffset);	
			//schematic.schematicCanvas.height=window.innerHeight; //-$("#topBar").height()
			//schematic.schematicCanvas.width=window.innerWidth-300;
			var graph = $("graph")[0];
			//cvs.height=300;
			//cvs.width=300;
			//schematic.schematicCanvas.width=window.innerWidth-300;
			schematic.draw();
		}

		$(document).ready(function () {
			schematic = new SchematicCapture();
			resizeWindow();
			$(".componentButton").click(function (e) {
				var pos = $(e.currentTarget).position()
				//console.log(pos)
				schematic.addComponent(e.currentTarget.id, pos.left, pos.top)
			});
			$("#clear").click(function (e) {
				schematic.clear();
			});
			window.addEventListener('resize', resizeWindow, false);
			//schematic.draw();
		});
	</script>
</body>

</html>